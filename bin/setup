cp -r ../nix/ ../../

# Backup files
mv ~/.bashrc ~/.bashrc.backup
mv ~/.profile ~/.profile.backup

# Have to install curl to install nix package manager
sudo apt install curl -y

# Install nix package manager
sh <(curl -L https://nixos.org/nix/install) --daemon --yes

# Source to get nix commands
source /etc/profile

nix run home-manager switch

# Install home manager
#nix-channel --add https://github.com/nix-community/home-manager/archive/release-23.11.tar.gz home-manager
#nix-channel --update
#nix-shell '<home-manager>' -A install

# Remove programs so there are no conflicts with nix packages
sudo snap remove --purge firefox
sudo apt purge curl git firefox -y
sudo apt autoremove -y

# Source to get home-manager commands
#source /etc/profile

# Switch to home-manager config
#home-manager switch --extra-experimental-features 'nix-command flakes'

